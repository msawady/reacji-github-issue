package handler

import (
	"fmt"
	"github.com/google/go-github/v45/github"
	"github.com/slack-go/slack/slackevents"
	"reacji-github-issue/config"
)

type IssueParam struct {
	Owner   string
	Repo    string
	Request *github.IssueRequest
}

func CreateIssueParam(event *slackevents.ReactionAddedEvent, setting *config.ReacjiSetting, permalink string) IssueParam {
	bodyMessage := fmt.Sprintf(`
auto generated by reacji-github-issue
from: %s
at: %s

%s
`, permalink, event.Item.Channel, setting.Description)

	return IssueParam{
		Owner:   setting.Owner,
		Repo:    setting.Repo,
		Request: &github.IssueRequest{Title: &event.Item.Message.Text, Body: &bodyMessage},
	}
}
