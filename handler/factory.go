package handler

import (
	"fmt"
	"github.com/google/go-github/v45/github"
	"github.com/slack-go/slack/slackevents"
	"reacji-github-issue/config"
	"reacji-github-issue/ext_service"
)

func CreateIssueParam(event *slackevents.ReactionAddedEvent, setting *config.ReacjiSetting, detail *ext_service.MessageDetail) ext_service.IssueParam {
	bodyMessage := fmt.Sprintf(`
auto generated by reacji-github-issue
from: %s
at: %s

%s
`, detail.Permalink, event.Item.Channel, setting.Description)

	return ext_service.IssueParam{
		Owner:   setting.Owner,
		Repo:    setting.Repo,
		Request: github.IssueRequest{Title: &detail.Message, Body: &bodyMessage},
	}
}
